{% extends "base_modern.html" %}
{% load static %}

{% block title %}Dashboard - ALCAL Premium{% endblock %}

{% block content %}
<div class="container-fluid">

	<!-- Header Section -->
	<div class="d-flex justify-content-between align-items-center mb-4">
		<div>
			<h2 class="fw-bold mb-0">Dashboard</h2>
			<p class="text-muted mb-0">Resumen del día</p>
		</div>
		<div class="d-none d-md-block">
			<span class="badge bg-light text-dark border px-3 py-2 rounded-pill">
				<i class="bi bi-calendar-event me-1"></i> {% now "l, d F Y" %}
			</span>
		</div>
	</div>

	<!-- KPI Cards (Simplified) -->
	<div class="row g-3 mb-4">
		<div class="col-md-4">
			<div class="glass-card p-3 d-flex align-items-center h-100">
				<div class="stat-icon blue me-3" style="width: 48px; height: 48px; font-size: 1.2rem;">
					<i class="bi bi-people-fill"></i>
				</div>
				<div>
					<h4 class="fw-bold mb-0">130</h4>
					<small class="text-muted">Alumnos Activos</small>
				</div>
			</div>
		</div>
		<div class="col-md-4">
			<div class="glass-card p-3 d-flex align-items-center h-100">
				<div class="stat-icon green me-3" style="width: 48px; height: 48px; font-size: 1.2rem;">
					<i class="bi bi-check-circle-fill"></i>
				</div>
				<div>
					<h4 class="fw-bold mb-0">92%</h4>
					<small class="text-muted">Asistencia Hoy</small>
				</div>
			</div>
		</div>
		<div class="col-md-4">
			<div class="glass-card p-3 d-flex align-items-center h-100">
				<div class="stat-icon orange me-3" style="width: 48px; height: 48px; font-size: 1.2rem;">
					<i class="bi bi-exclamation-triangle-fill"></i>
				</div>
				<div>
					<h4 class="fw-bold mb-0">5</h4>
					<small class="text-muted">Alertas de Faltas</small>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Main Actions Section -->
<div class="row g-4">
	<!-- Asistencia -->
	<div class="col-md-4">
		<div class="glass-card h-100">
			<div class="d-flex justify-content-between align-items-center mb-3">
				<h5 class="fw-bold mb-0"><i class="bi bi-clipboard-check text-primary me-2"></i>Asistencia</h5>
			</div>
			<div class="row g-2">
				<div class="col-6">
					<a href="/tomar_asistencia_curso/" class="btn btn-light w-100 py-3 text-start border hover-scale">
						<i class="bi bi-collection-fill d-block mb-2 text-primary fs-4"></i>
						<span class="fw-bold d-block">Por Curso</span>
						<small class="text-muted">Tomar lista grupal</small>
					</a>
				</div>
				<div class="col-6">
					<a href="/ingresar_asistencia_alumno/"
						class="btn btn-light w-100 py-3 text-start border hover-scale">
						<i class="bi bi-person-fill d-block mb-2 text-primary fs-4"></i>
						<span class="fw-bold d-block">Individual</span>
						<small class="text-muted">Falta particular</small>
					</a>
				</div>
			</div>
		</div>
	</div>

	<!-- Calificaciones -->
	<div class="col-md-4">
		<div class="glass-card h-100">
			<div class="d-flex justify-content-between align-items-center mb-3">
				<h5 class="fw-bold mb-0"><i class="bi bi-bar-chart-fill text-success me-2"></i>Calificaciones</h5>
			</div>
			<div class="row g-2">
				<div class="col-6">
					<a href="/ingresar_calificaciones_curso/"
						class="btn btn-light w-100 py-3 text-start border hover-scale">
						<i class="bi bi-grid-3x3-gap-fill d-block mb-2 text-success fs-4"></i>
						<span class="fw-bold d-block">Por Curso</span>
						<small class="text-muted">Carga masiva</small>
					</a>
				</div>
				<div class="col-6">
					<a href="/ingresar_calificaciones_alumno/"
						class="btn btn-light w-100 py-3 text-start border hover-scale">
						<i class="bi bi-person-lines-fill d-block mb-2 text-success fs-4"></i>
						<span class="fw-bold d-block">Individual</span>
						<small class="text-muted">Nota particular</small>
					</a>
				</div>
			</div>
		</div>
	</div>

	<!-- Gestión Administrativa -->
	<div class="col-md-4">
		<div class="glass-card h-100">
			<div class="d-flex justify-content-between align-items-center mb-3">
				<h5 class="fw-bold mb-0"><i class="bi bi-gear-fill text-warning me-2"></i>Gestión</h5>
			</div>
			<div class="d-grid gap-2">
				<a href="/gestion/" class="btn btn-warning w-100 py-3 text-start border-0 hover-scale">
					<i class="bi bi-speedometer2 d-block mb-2 fs-4"></i>
					<span class="fw-bold d-block">Panel de Administración</span>
					<small class="text-dark opacity-75">Gestionar carreras, cursos, materias, docentes, alumnos y
						turnos</small>
				</a>
			</div>
		</div>
	</div>

	<!-- Charts Section (Simplified) -->
	<div class="row mt-4">
		<div class="col-12">
			<div class="glass-card">
				<h6 class="fw-bold mb-3 text-muted text-uppercase small">Tendencia de Asistencia Semanal</h6>
				<div id="attendanceChart" style="min-height: 250px;"></div>
			</div>
		</div>
	</div>

</div>
{% endblock %}

{% block extra_js %}
<script>
	document.addEventListener('DOMContentLoaded', function () {
		var optionsBar = {
			series: [{
				name: 'Asistencia',
				data: [92, 88, 95, 82, 90]
			}],
			chart: {
				type: 'area',
				height: 250,
				toolbar: { show: false },
				fontFamily: 'Outfit, sans-serif',
				sparkline: { enabled: false }
			},
			stroke: { curve: 'smooth', width: 2 },
			fill: {
				type: 'gradient',
				gradient: {
					shadeIntensity: 1,
					opacityFrom: 0.7,
					opacityTo: 0.2,
					stops: [0, 90, 100]
				}
			},
			xaxis: {
				categories: ['Lun', 'Mar', 'Mié', 'Jue', 'Vie'],
				axisBorder: { show: false },
				axisTicks: { show: false }
			},
			yaxis: { show: false },
			grid: { show: false },
			colors: ['#6366f1'],
			dataLabels: { enabled: false }
		};

		var chartBar = new ApexCharts(document.querySelector("#attendanceChart"), optionsBar);
		chartBar.render();
	});
</script>
{% endblock %}